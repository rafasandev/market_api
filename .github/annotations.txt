ANOTAÇÕES GERAIS

- Ao criar um usuário novo, ele pode ser tanto um comprador quanto um vendedor. Informações básicas para um usuário: email, senha e status.
- Se for um comprador, as informações adicionais do perfil são: nome e cpf.
- Se for um vendedor, as informações adicionais são: nome da loja, cnpj e setor de atuação (Comércio ou Serviço).

- comprador
    - Ao registrar um novo comprador, um novo carrinho vazio é criado, vinculado ao ID do usuário
    - Ao finalizar um pedido, o carrinho do comprador é esvaziado e atualizado, nunca deletado
    - O novo comprador é registrado com o status inativo, devendo completar o perfil com ao menos um meio de contato
- vendedor
    - O vendedor é registrado com informações básicas, mas status inativo. Só será dado como ativo após configurar disponibilidade e ao menos um meio de contato (DESENVOLVIMENTO PENDENTE)
    - O vendedor é registrado com um saldo inicial de 0
    - Os meios de pagamento serão configurados com o envio da seguinte estrutura de dados:
        paymentMethodIds: [uuid, uuid, uuid, ...]
    - A disponibilidade do vendedor será configurada com o envio da seguinte estrutura de dados:
        weekDaysAvailable : [1,2,3,4,5] (1=Domingo, 2=Segunda, ..., 7=Sábado)
        dailyAvailability(List<CompanyDailyAvailabilityForm>): [
            {
                weekDay: 1,
                timeRanges (List<TimeRangeForm>): [
                    {
                        startTime: "08:00",
                        endTime: "12:00"
                    },
                    {
                        startTime: "14:00",
                        endTime: "18:00"
                    }
                ]
            },
            {
                weekDay: 2,
                timeRanges (List<TimeRangeForm>): [
                    {
                        startTime: "09:00",
                        endTime: "17:00"
                    }
                ]
            }
        ]

- Ambos perfis devem configurar ao menos um meio de contato para serem ativados
- Depois da configuração dos perfis, o status dos usuários deve ser alterado para ATIVO
- A verificação do status ativo/inativo é feita com um método interno no modelo do Profile (individualIsAbleToBeActive e companyIsAbleToBeActive)
- Para evitar duplicação de código, a verificação será feita no serviço de salvamento do perfil, em IndividualProfileService e CompanyProfileService

- Apenas ADMINS podem criar categorias de produtos no sistema
- Produtos são criados com: nome, descrição, preço base, quantidade em estoque e categoria
- Produtos não podem ser criados com variações inicialmente

- O cálculo de quantidade de estoque do produto é feito de forma automática no Service dele, não sendo alterado por métodos internos
- A quantidade é calculada com base nas quantidades individuais das variações de produto

- Ao requisitar o fechamento do pedido, o sistema deve:
    - Verificar se o usuário atual logado é um comprador
    - Buscar o carrinho do comprador
    - Validar se o carrinho não está vazio
    - Validar se os itens (product variations) estão disponíveis e com estoque suficiente
    - Separa os itens por vendedor (Map <CompanyProfile, List<CartItem>>)
    - O pedido original será repartido para vários pedidos, um para cada vendedor
    - Para cada item do mapa, será calculado o total parcial daquele vendedor
    - Será criado um Order para o vendedor, com o status PENDENTE e o código de confirmação único
    - Será criado um snapshot dos itens do pedido, vinculados ao pedido
    - O estoque dos produtos será ajustado conforme os itens do pedido
    - O carrinho do comprador será esvaziado e atualizado
    - Todos os dados dos itens do pedido serão persistidos nos snapshots, para evitar perda de dados futuros

- 

